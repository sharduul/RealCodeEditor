<html>
<head>
	<title>Real Code Editor</title>
	
	<!-- css start -->
	<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/css/app.css">
	<!-- css start -->

	<!-- script start -->
	<script src="lib/sharejs/bcsocket.js"></script> 							<!-- add transport -->
	<script src="lib/sharejs/bcsocket-uncompressed.js"></script>             	<!-- add transport -->
	<script src="lib/sharejs/webclient/share.js"></script>      				<!-- ShareJS -->
	<script src="lib/sharejs/webclient/share.uncompressed.js"></script>      	<!-- ShareJS -->
	<script src="lib/sharejs/webclient/textarea.js"></script>   				<!-- helper to attach textarea to ShareJS server -->
	<!-- script end -->
</head>
<body>
	<h2>Real Code Editor</h2>
	
	<div class="container-fluid" ng-controller="EditProfileController">
	<!-- <form id="codeform" action="/run_program/" + document.getElementById("sharetext").value> 
		<div class="row-fluid">
			<textarea id='sharetext' name="sharetext" style="width:300px; height:300px;"></textarea>
		</div>
		<div class="row-fluid">
			<button type="submit" class="btn btn-primary" id="runsubmit" name="" onclick="run_program()" style="">
				Run
			</button>
		</div>
		
	 </form> -->
	
	<div class="row-fluid">
		<textarea id='sharetext' name="sharetext" style="width:300px; height:300px;"></textarea>
	</div>
	<div class="row-fluid">
		<button type="submit" class="btn btn-primary" id="runsubmit" name="" onclick="run_program()" style="">
			Run
		</button>
	</div>
	
	</div>
	
	<div id="editor">
	</div>
	<script>
		
		var elem = document.getElementById("sharetext");
		
		// connect to the server
		var connection = sharejs.open('test', 'text', function(error, doc) {
			// this function is called once the connection is opened
			if (error) 
			{
				console.log("ERROR:", error);
			} 
			else 
			{
				// attach the ShareJS document to the textarea
				doc.attach_textarea(elem);
			}
		});
		
		function run_program()
		{
			console.log(document.getElementById("sharetext").value);
			var text = document.getElementById("sharetext").value;
			text = escape(text);
			window.location = "/run_program/" + text;
		}
		
	</script>
</body>
</html>