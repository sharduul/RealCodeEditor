<html>
    <head>
        <title>ShareJS Tutorial</title>
        <!-- NEW -->
        <script src="bcsocket.js"></script>             <!-- add transport -->
		<script src="bcsocket-uncompressed.js"></script>             <!-- add transport -->
        <script src="webclient/share.js"></script>      <!-- ShareJS -->
		<script src="webclient/share.uncompressed.js"></script>      <!-- ShareJS -->
        <script src="/webclient/textarea.js"></script>   <!-- helper to attach textarea to ShareJS server -->

        <!-- /NEW -->
    </head>
    <body>
        <h1>ShareJS Tutorial</h1>
		<form id="codeform" action="" method="">
			<textarea id='sharetext' style="width:300px; height:300px;"></textarea>
			<button type="submit" class="btn btn-primary" id="runsubmit" name="runsubmit" style="margin-left:0px;">
				Run
			</button>
		</form>
		<button class="" onclick="xxxxx()" id="runsubmit2" name="runsubmit2" style="margin-left:0px;">
				Run
		</button>
		<div id="editor">
		</div>
        <!-- NEW -->
        <script>
			
			
			var elem = document.getElementById("sharetext");
            // connect to the server
			
            var connection = sharejs.open('test', 'text', function(error, doc) {
                // this function is called once the connection is opened
                if (error) {
                    console.log("ERROR:", error);
                } else {
                    // attach the ShareJS document to the textarea
                    doc.attach_textarea(elem);
                }
            });
			
			
			function xxxxx()
			{
				var sys = require('sys')
				var exec = require('child_process').exec;
				function puts(error, stdout, stderr) {sys.puts(stdout)}
				var ttt = exec("ls -la", puts);
				document.getElementById("sharetext").value = ttt;
				//console.log("\\nnasdfsdf\n\n");
			}
			
</script>
        <!-- /NEW -->
    </body>
</html>